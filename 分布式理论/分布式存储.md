- [分片](#分片)
  - [水平分片](#水平分片)
    - [数据分片](#数据分片)
  - [垂直分片](#垂直分片)
  - [混合分片](#混合分片)
- [复制 - 高可用](#复制---高可用)


在“分布式存储篇”，我们先解决单机存储和性能瓶颈的“分片”，再解决数据高可用的“复制”，然后讨论如何在已经“分片”和“复制”的数据集上实现 ACID 事务，最后从实践回归到理论，讨论分布式系统最核心、最重要的两个问题：一致性和共识


# 分片

## 水平分片

### 数据分片

1.基于关键词的分片

基于关键词划分的好处是，分片后数据的分布依然保留了关键词的顺序，我们可以方便地进行区间查询。假如我们在设计一个中国的公民数据库，将地址信息作为分片的关键词进行划分。如果我们需要查询“北京市海淀区”的所有公民，将查询区间设置为 [北京市海淀区 , 北京市海淀区] 即可，因为所有“北京市海淀区”的公民信息是连续存储在一起的。

数据分布不均匀和访问的热度不均匀

2.Range分片

区域内过于集中，相对好扩展一点

3.Hash分片

对分片键hash取模，分母是机器数，要扩容或者缩容比较麻烦，rehash工作量大

一致性hash+虚拟节点

对分片hash取模，只不过分母是固定的2^32，相当于hash后分小区域集中

一旦扩容或者缩容就会将数据分散均匀分散到各个节点

## 垂直分片

大数据的场景，

## 混合分片

水平和垂直分片的混合

# 复制 - 高可用

