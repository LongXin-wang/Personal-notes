- [目录结构\&文件管理](#目录结构文件管理)
  - [文件组权限](#文件组权限)
  - [文件的crud](#文件的crud)
    - [增加](#增加)
    - [删除](#删除)
    - [修改](#修改)
    - [查看](#查看)
      - [查看文件内容](#查看文件内容)
      - [查找文件](#查找文件)
- [进程\&管道](#进程管道)
  - [进程](#进程)
  - [管道](#管道)
    - [重定向](#重定向)
- [网络](#网络)
  - [远程操作](#远程操作)
  - [本地网络](#本地网络)
    - [http](#http)

# 目录结构&文件管理

## 文件组权限

- 读（read）、写（write）、执行（execute  执行文件，对目录来说是能进入该 目录）
- chmod xxx <file-name> chmod 755 <file-name> （权限修改为rwxr-xr-x）
- chmod(change mode)  o+w file  给Owner增加W的权限

![](https://gitee.com/wanglongxin666/pictures/raw/master/img/202402011918768.png)


**文件类型**

常见的有普通文件、目录、字符设备文件、块设备文件、符号链接文件：
* -：普通文件（包括字符和二进制文件）可使用touch<fle-name>创建
* d:目录文件(directory),可使用mkdir<dir-name>创建
* c:字符串设备文件(char),如路由器等设备
* b:块设备文件(block),如硬盘、光驱等
* l:符号链接文件(link)
* s:套接字文件(soket)

## 文件的crud

### 增加

创建一个普通文件的方法有很多，最常见的有`touch`指令。比如下面我们创建了一个 a.txt 文件。

如果你拿到一个指令不知道该怎么用，比如`touch`，你可以用`man touch`去获得帮助。`man`意思是 manual，就是说明书的意思，这里指的是系统的手册。如果你不知道`man`是什么，也可以使用`man man`。

另外如果我们需要增加一个目录，就需要用到`mkdir`指令（ make directory)

### 删除

如果我们想要删除`a.txt`可以用`rm a.txt`；如我们要删除`hello`目录，可以用`rm hello`。`rm`是 remove 的缩写。

但是当我们输入`rm hello`的时候，会提示`hello`是一个目录，不可以删除。因此我们需要增加一个可选项，比如`-r`即 recursive（递归）。目录是一个递归结构，所以需要用递归删除。最后，你会发现`rm hello -r`删除了`hello`目录。

rm -rf : 递归强制删除目录

### 修改

如果需要修改一个文件，可以使用`nano`或者`vi`编辑器。类似的工具还有很多，但是`nano`和`vi`一般是`linux`自带的。

### 查看

创建之后我们可以用`ls`指令看到这个文件，`ls`是 list 的缩写。下面是指令 ‘ls’ 的执行结果。

我们看到在当前的目录下有一个`a.txt`文件，还有一个`hello`目录。如果你知道当前的工作目录，就可以使用`pwd`指令。

如果想看到`a.txt`更完善的信息，还可以使用`ls -l`。`-l`是`ls`指令的可选参数。下图是`ls -l`的结果，你可以看到`a.txt`更详细的描述。

#### 查看文件内容

当文件较小时，比如一个配置文件，想要快速浏览这个文件，可以用cat指令。下面 cat 指令帮助我们快速查看/etc/hosts文件。cat指令将文件连接到标准输出流并打印到屏幕上。

open 直接打开文件，方便

`more`可以帮助我们读取文件，但不需要读取整个文件到内存中。本身`more`的定位是一个阅读过滤器，比如你在`more`里除了可以向下翻页，还可以输入一段文本进行搜索。

我在`more`查看一个 nginx 日志后，先输入一个`/`，然后输入`192.168`看到的结果。`more`帮我找到了`192.168`所在的位置，然后又帮我定位到了这个位置。整个过程 more 指令只读取我们需要的部分到内存中。

`less`是一个和`more`功能差不多的工具，打开`man`能够看到`less`的介绍上写着自己是`more`的反义词（opposite of more）。这样你可以看出`linux`生态其实也是很自由的一个生态，在这里创造工具也可以按照自己的喜好写文档。`less`支持向上翻页，这个功能`more`是做不到的。所以现在`less`用得更多一些。

`head`和`tail`是一组，它们用来读取一个文件的头部 N 行或者尾部 N 行。比如一个线上的大日志文件，当线上出了 bug，服务暂停的时候，我们就可以用`tail -n 1000`去查看最后的 1000 行日志文件，寻找导致服务异常的原因。

另一个比较重要的用法是，如果你想看一个实时的`nginx`日志，可以使用`tail -f 文件名`，这样你会看到用户的请求不断进来。查一下`man`，你会发现`-f`是 follow 的意思，就是文件追加的内容会跟随输出到标准输出流。

有时候你需要查看一个指定`ip`的nginx日志，或者查看一段时间内的`nginx`日志。如果不想用`less`和`more`进入文件中去查看，就可以用`grep`命令。Linux 的文件命名风格都很短，所以也影响了很多人，比如之前我看到过一个大牛的程序，变量名从来不超过 5 个字母，而且都有意义。

#### 查找文件

之前我们使用过一个`which`指令，这个指令可以查询一个指令文件所在的位置，比如`which grep`会，你会看到`grep`指令被安装的位置是`/usr/bin`。但是我们还需要一个更加通用的指令查找文件，也就是 find 指令。

find 指令帮助我们在文件系统中查找文件。 比如我们如果想要查找所有.txt 扩展名的文件，可以使用find / -iname "*.txt"，-iname这个参数是用来匹配查找的，i 字母代表忽略大小写，这里也可以用-name替代。

# 进程&管道

## 进程

**应用的可执行文件是放在文件系统里，把可执行文件启动，就会在操作系统里（具体来说是内存中）形成一个应用的实例/副本，这个实例就是进程**

进程的创建通常包括以下步骤：

1. 操作系统为进程分配内存空间。
2. 可执行文件的代码和数据被加载到进程的内存空间。
3. 操作系统为进程分配资源，如文件描述符、打开的网络连接等。
4. 进程开始在操作系统的调度下执行。

**ps**

`ps`指令。p 代表 processes，也就是进程；s 代表 snapshot，也就是快照。所谓快照，就是像拍照一样。（所以看到的是ps那一时刻的进程有哪些

可以用`ps -e`，`-e`没有特殊含义，只是为了和`-A`区分开。我们通常不直接用`ps -e`而是用`ps -ef`，这是因为`-f`可以带上更多的描述字段

`ps aux`，它和`ps -ef`能力差不多，但是是 BSD 风格的

另外还有一个和`ps`能力差不多，但是显示的不是快照而是实时更新数据的`top`指令

## 管道

管道（Pipeline）的作用是在命令和命令之间，传递数据。比如说一个命令的结果，就可以作为另一个命令的输入。我们了解了进程，所以这里说的命令就是进程。更准确地说，管道在进程间传递数据。

### 重定向

我们执行一个指令，比如`ls -l`，结果会写入标准输出流，进而被打印。这时可以用重定向符将结果重定向到一个文件，比如说`ls -l > out`，这样`out`文件就会有`ls -l`的结果；而屏幕上也不会再打印`ls -l`的结果。

具体来说`>`符号叫作覆盖重定向；`>>`叫作追加重定向。`>`每次都会把目标文件覆盖，`>>`会在目标文件中追加。比如你每次启动一个程序日志都写入`/var/log/somelogfile`中

```bash
# 包含Spring但不包含MyBatis
find ./ | grep Spring | grep -v MyBatis
```

# 网络

## 远程操作

**ssh**

有一种场景需要远程登录一个 Linux 系统，这时我们会用到ssh指令。比如你想远程登录一台机器，可以使用ssh user@ip的方式

**scp**

需要拷贝一个文件到远程，这时可以使用scp指令

## 本地网络

**ifconfig**

当你想知道本地`ip`以及本地有哪些网络接口时，就可以使用`ifconfig`指令。你可以把一个网络接口理解成一个网卡，有时候虚拟机会装虚拟网卡，虚拟网卡是用软件模拟的网卡。

**netstat**

另一个查看网络状态的场景是想看目前本机的网络使用情况，这个时候可以用`netstat`。

**查看端口**
lsof -i:3306

### http

**curl执行post**

curl在向`localhost:3000`发送 POST 请求。`-d`后面跟着要发送的数据， -`X`后面是用到的 HTTP 方法，`-H`是指定自定义的请求头。

```bash
curl -d '{"x" : 1}' -H "Content-Type: application/json" -X POST http://localhost:3000/api

```

**curl执行get**

```bash
curl https://proxy.mimvp.com/login?user=admin&passwd=12345678  

```


