- [字符编码](#字符编码)
  - [字节](#字节)
  - [字符](#字符)
  - [字符集](#字符集)
    - [ASCII 字符集](#ascii-字符集)
    - [Unicode 字符集](#unicode-字符集)
      - [UTF8](#utf8)
      - [UTF6](#utf6)
      - [UTF32](#utf32)
  - [字符编码](#字符编码-1)
  - [码点](#码点)
- [存储文件](#存储文件)
- [编码、解码](#编码解码)
    - [ASCII](#ascii)
    - [UTF8](#utf8-1)
  - [二进制编码](#二进制编码)
  - [浮点数](#浮点数)
  - [编码举例](#编码举例)
- [进制转换](#进制转换)
  - [二进制 -- 十进制](#二进制----十进制)
  - [十六进制 -- 十进制](#十六进制----十进制)
  - [二进制 -- 十六进制](#二进制----十六进制)


# 字符编码

## 字节
字节是一个八位的存储单元，取值范围一定是0～255。

## 字符

字符（Character） 是对文字和符号的总称，一个字符可以是一个中文汉字、一个英文字母、一个阿拉伯数字、一个标点符号、一个图形符号或者控制符号等。

## 字符集

字符集（Character Set）：是指多个字符的集合。不同的字符集包含的字符个数不一样、包含的字符不一样、对字符的编码方式也不一样。例如GB2312是中国国家标准的简体中文字符集，GB2312收录简化汉字（6763个）及一般符号、序号、数字、拉丁字母、日文假名、希腊字母、俄文字母、汉语拼音符号、汉语注音字母，共 7445 个图形字符。而ASCII字符集只包含了128字符，这个字符集收录的主要字符是英文字母、阿拉伯字母和一些简单的控制字符。

另外，还有其他常用的字符集有 GBK字符集、GB18030字符集、Big5字符集、Unicode字符集等。

- ASCII字符集 -- ASCII编码 （一个字节：英文字母、数字、符号）
- GBK字符集 -- GBK编码 （2个字节）
- Unicode字符集 -- UTF8、UTF16、UTF32编码

### ASCII 字符集

ASCII编码一共规定了128个字符的编码规则，这128个字符形成的集合就叫做ASCII字符集。在ASCII编码中，每个字符占用一个字节的后面7位，最前面的1位统一规定为0。在ASCII编码中，0~31 是控制字符如换行回车删除等，32~126 是可打印字符，可以通过键盘输入并且能够显示出来。

### Unicode 字符集

Unicode只是一个字符集，它只规定了符号的二进制代码，却没有规定这个二进制代码应该如何编码如何存储。

这就造成了两个问题：

- 第一个问题是，如何才能区别Unicode和ASCII？计算机怎么知道三个字节表示一个符号，而不是分别表示三个符号呢？

- 第二个问题是，我们已经知道，英文字母只用一个字节表示就够了，如果unicode统一规定，每个符号用三个或四个字节表示，那么每个英文字母前都必然有二到三个字节是0，这对于存储来说是极大的浪费，文本文件的大小会因此大出二三倍，这是无法接受的。

#### UTF8

UTF-8 是 1~4 个字节的变长编码，相对来说最节省空间


* 规则 1： 不同范围的码点值使用不同长度的编码；
* 规则 2： 字节编码总长度为 1 时前缀为 0、总长度为 2 时前缀为 110、总长度为 3 时前缀为 1110、总长度为 4 时前缀为 11110 ；
* 规则 3： 除了首个字节，字符编码中其余字节的前缀为 10。

**举例**

以『好』为例，『好』对应的 Unicode 码点是597D，对应的区间是 0000 0800--0000 FFFF，因此它用 UTF-8 表示时需要用3个字节来存储，597D用二进制表示是： 0101100101111101，填充到 1110xxxx 10xxxxxx 10xxxxxx 得到 11100101 10100101 10111101，转换成16进制是 e5a5bd，因此『好』的 Unicode 码 U+597D 对应的 UTF-8 编码是 "E5A5BD"。

数字 1 的 Unicode 码点是 U+0031。在二进制中，它表示为 00110001，在十六进制中，它表示为 0x31。

字母 A 的 Unicode 码点是 U+0041。在二进制中，它表示为 01000001，在十六进制中，它表示为 0x41。


#### UTF6

UTF-16 是 2 个字节或 4 个字节的变长编码

#### UTF32

UTF-32 使用 4 个字节的定长编码，这对于 4 个字节 UTF-32 编码来说就绰绰有余。


## 字符编码

字符编码（Character Encoding）：字符编码是指一种映射规则，根据这个映射规则可以将某个字符映射成其他形式的数据以便在计算机中存储和传输。例如ASCII字符编码规定使用单字节中低位的7个比特去编码所有的字符，在这个编码规则下字母A的编号是65（ASCII码），用单字节表示就是0x41，因此写入存储设备的时候就是二进制的 01000001。每种字符集都有自己的字符编码规则，常用的字符集编码规则还有 UTF-8编码、GBK编码、Big5编码等。

## 码点
码点（Code Point）：有些地方翻译为码值或内码。是指在某个字符集中，根据某种编码规则将字符编码后得到的值。比如在ASCII字符集中，字母A经过ASCII编码得到的值是65，那么65就是字符A在ASCII字符集中的码点。

通俗解释字符集就是把字符放到一起的一个集合。而这个集合的每一个字符都对应一个数字，叫做码点。那么，这样就建立起来数字和字符之间的索引关系。

# 存储文件

文本文件：对于文本文件，可以直接将其内容转换为字符串，然后序列化成二进制，以便进行存储和传输。

二进制文件：对于图片、视频、音频等二进制文件，通常会直接以二进制形式进行存储，而不需要转换为字符串。

数据库存储：在数据库中，文件可以以二进制形式直接存储，而无需转换为字符串。

序列化：在某些情况下，需要对对象进行序列化，这时会将对象转换为二进制形式，而不一定需要转换为字符串

# 编码、解码

都是二进制编码格式

### ASCII

最早 ASCII 只定义了128个字符编码，包括96个文字和32个控制符号，一共128个字符只需要一个字节的7位就能表示所有的字符，因此 ASCII 只使用了一个字节的后7位，剩下最高位1比特被用作一些通讯系统的奇偶校验

### UTF8

英文1字节，汉字3字节

```python
s = 'Hello, world!'
b = s.encode('ascii')
print(b)  # b'Hello, world!'

s = 'Hello, 世界!'
b = s.encode('utf-8')
print(b)  # b'Hello, \xe4\xb8\x96\xe7\x95\x8c!' python转化为字节输出了（16进制）
b = s.encode('utf-16')
print(b)  # b'Hello, \xe4\xb8\x96\xe7\x95\x8c!'
b = s.encode('ascii') # 报错，asciib不支持中文

'''
这是因为在第一个字节字符串中，包含了以 UTF-8 编码表示的多字节字符，例如“世界”（在UTF-8编码中占据3个字节的"\xe4\xb8\x96"和"\xe7\x95\x8c"），而在第二个字节字符串中，只包含单字节字符。因此，由于UTF-8编码下的多字节字符，导致第一个字节字符串的长度为14，而第二个字节字符串的长度为13。
'''
print(len(b'Hello, \xe4\xb8\x96\xe7\x95\x8c!'))  # 14
print(len(b'Hello, world!'))  # 13 = 12 + 1空格
```

## 二进制编码

>无论哪种编码格式，传输都要转成二进制编码；将某个字符或字符串转换为UTF-8编码时，实际上就是将其转换为二进制编码的一种方式

**数字转二进制，可以用整数表示法，汉字/英文等转二进制，有对应的二进制表示**

>在 ASCII 码里面，数字 9 和整数表示法里一样，用 0000 1001 来表示。字符串 15 也不是用 0000 1111 这 8 位来表示，而是变成两个字符 1 和 5 连续放在一起，也就是 0000 0001 和 0000 0101，需要用两个 8 位来表示。

>我们可以看到，最大的 32 位整数，就是 2147483647。如果用整数表示法，只需要 32 位就能表示了。但是如果用字符串来表示，一共有 10 个字符，每个字符用 8 位的话，需要整整 80 位。比起整数表示法，要多占很多空间。

## 浮点数

![](https://gitee.com/wanglongxin666/pictures/raw/master/img/202402041018403.png)

## 编码举例

*“11，你好”这个字符串的UTF-8编码如下所示：*

"11"的UTF-8编码：

"1"的UTF-8编码： 00110001
"1"的UTF-8编码： 00110001
“，” 的UTF-8编码： 11001100 10101100
"你好"的UTF-8编码：

"你"的UTF-8编码： 11100100 10111001 10100100
"好"的UTF-8编码： 11100100 10111010 10011101

*65这样一个整数的utf8表示*

整数65的UTF-8表示是：0110 1001 -> 0x41

# 进制转换

**二进制**
二进制，逢二进一，数字中只有 0 和 1
例如，数数，二进制的数法是：0，1 接着 10，11 接着 100，101，110，111 接着 1000,1001 ... 1111 以此类推。

**十进制**

十进制，逢十进一，数字中含有 0，1，2，3，4，5，6，7，8，9
十进制是我们从小就开始学习的，应该没有人不会吧，从1数到100会把，哈哈。

**十六进制**

十六进制，逢十六进一，表示形式比较特殊，因为10~15不能用数字来展示，不然就乱套了。所以强制规定如下
10 用 A 表示、11 用 B 表示、12 用 C 表示、13 用 D 表示、14 用 E 表示。

## 二进制 -- 十进制

二进制 --> 十进制

![](https://gitee.com/wanglongxin666/pictures/raw/master/img/202404291521244.png)

十进制 ———> 二进制

辗转相除法

## 十六进制 -- 十进制

十六进制 --> 十进制

![](https://gitee.com/wanglongxin666/pictures/raw/master/img/202404291543973.png)

十进制 --> 十六进制

辗转相除法

## 二进制 -- 十六进制

二进制 --> 十六进制

![](https://gitee.com/wanglongxin666/pictures/raw/master/img/202404291548657.png)


十六进制 --> 二进制

![](https://gitee.com/wanglongxin666/pictures/raw/master/img/202404291549693.png)